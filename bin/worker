#!/usr/bin/env php
<?php

require __DIR__.'/../vendor/autoload.php';

use JobQueue\Application\Console\WorkerApplication;
use JobQueue\Infrastructure\ServiceContainer;

$worker = (new WorkerApplication(
    ServiceContainer::getInstance()->queue,
    ServiceContainer::getInstance()->dispatcher
));

if (isset(ServiceContainer::getInstance()->logger)) {
    $worker->setLogger(ServiceContainer::getInstance()->logger);
}

$worker->run();
